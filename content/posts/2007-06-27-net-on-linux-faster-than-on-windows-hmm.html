---
layout: post
title: .NET on Linux faster than on Windows ? Hmm
date: 2007-06-27 22:28:29.000000000 -04:00
type: post
published: true
status: publish
categories: ["programming"]
tags: ["dot-net","linux"]
meta: {}
author: "Miro Adamy"
---
<p>An interesting article on JavaLobby caught my eye today: <a href="http://www.javalobby.org/java/forums/t97871.html" target="_blank">Do .NET Applications Run Better on Java?<br />
</a><br />
Normally, knowing the not exactly impartial focus of the Java centric site such as <a href="http://www.javalobby.org/java/forums/t97871.html" target="_blank">JavaLobby</a> or <a href="http://www.theserverside.com/" target="_blank">theserverside.com</a>, one should be careful when reading how much Java outperforms .NET. The bias works the other way too - just look at the <a href="http://www.theserverside.net/" target="_blank">Theserverside.net</a> or other .NET centric side how much is C# superior :-). With that in mind, I looked at<a href="http://www.mainsoft.com/solutions/pdfs/PerformanceStudy.pdf" target="_blank"> the technical report</a>.</p>
<p>The report was produced by <a href="http://www.mainsoft.com/solutions/pdfs/PerformanceStudy.pdf" target="_blank">Mainsoft</a>, the company behind the cross compiler product MainSoft for Java EE. The crosscompilation means that the C# or VB.NET code is first compiled into CLR bytecode using standard Microsoft tools and then transformed into Java bytecode using the CLR byte as input. The study was based on fairly large project - 260'000 lines of code. The published result show that translated code running on Java VM and Websphere platform outperformed the .NET stack on both Windows as well as Linux platform.</p>
<p>So far so good. I have no plan to question the results of the test. One could argue that because the evaluation was not done by independent third party, but by the authors of the crosscompiler, the result must be like it was - simply because if the measurement would show that .NET performs better, no report would be published :-)</p>
<p>First of all "faster" does not really means much faster. The speed increase measured is 8% in throughput and very much the same for requests per second. 8% increase is much too small to suggest doing anything major with the application, certainly not re-platforming ...</p>
<p>Second, comparison based on single port of an application proves absolutely nothing about results of repeating same process for other application or even every application. It can be indication of reality as easy as an exception. I am pretty sure that given the chance to respond, Microsoft or some other party interested in the opposite outcome, could find a C# application that would perform worse after conversion.</p>
<p>More interesting questions is why would you want to do this - replace Win2003 + .NET CLR with some other operating system (Windows/Linux/something else) plus Java plus Websphere. Clearly, performance cannot be the reason - at least not based on this results.</p>
<p>Price is not a good reason either. From cost saving perspective, crosscompiling .NET application to run in Java under Windows makes no sense, because .NET runtime is part of Win2003 license and cost of the license is there in both cases. This leaves using Linux as platform (or some other free alternative). True, Linux is free - but support is not, neither is labor. In real life, initial costs of licenses are small compared to accumulated costs of supporting application in production - and professional support for Windows or Linux is comparably priced. Besides, I bet that savings gained from not paying for Windows license will not cover cost of Websphere license plus the Mainsoft Java EE Entreprise edition license. True, you could use free j2EE server just as Tomcat or Glassfish or JBoss with the free Grasshoper version of the crosscompiler - but you may not get the same performance numbers. I like Tomcat and use it all the time: it is nice, flexible, easy to configure - but, not the fastest servlet container out there (there must be a reason why did Mainsoft pick Websphere with their own enterprise version after all) ...</p>
<p>What is the conclusion ? The article above and approach it describes can be a life saviour if you have lot's of .NET code and *must* for some real reason switch the platform. The reason may be technical - or not - just consider the magic Google did with Linux. The report does hint one possible good reason - moving your application from PC's to really big machine - multiprocessors (multi means more than 16 these days when desktop machines start getting quadcores ;-)) running Unix or mainframe. The report shows that AIX on Power5+ based system with 4 CPU did ~ 3400 requests per second whereas the PC based did 2335. This would be interesting if  the comparison was fair - but it was not. The AIX had 32 GB RAM whereas PC (with Linux or Windows) had 2 GB and you can imagine the price difference in the hardware.</p>
<p>But if there is no really compelling business reason of switching platforms, sticking with Windows when you want to run .NET application may save you lot of work - and most likely some money as well.</p>
