---
layout: post
title: OS-X near-death experience
date: 2008-06-06 02:08:27.000000000 -04:00
type: post
published: true
status: publish
category: lifehacks
tags:
- osx
author: "Miro Adamy"
---
<p>It happened on Wednesday afternoon. I knew something is wrong with my MacBook Pro immediately - when I saw semi-dark screen, unresponsive machine - even mouse cursor was frozen - and heard fans blowing full speed, making the strange, clicking noise coming from inside almost disappear ...</p>
<p>OS-X does not freeze too often, but it can happen and as a matter of fact, I have seen it happen before during my almost two years with Mac, so I did not panic. As expected, the Alt-Option trick did not work, so all I could do was to force power off.</p>
<p>But then, after reboot and "bang" sound, neither the rotating circle nor the blue screen showed up. I mean the good blue screen, background color of booting OS-X, not THAT blue screen, of course. Instead, screen stayed grayish and showing No-Entry sign ... And again and again ...</p>
<p>At first I was pretty sure that the hard disk is gone. But after booting up from install DVD (hold C during boot) and running Disk Utilities "verify" and "repair" disk, it did not find anything wrong with it. It was - according to Disk Utility - perfectly good, healthy disk, which only boot stubbornly returned to the No-Entry sign with each and every boot attempt. It was obvious that I will soon have an opportunity to really test out the Time Machine restore capabilities.</p>
<p>Normally, I plug in the Time Machine backup disk every day after unpacking the notebook at home in my home office - and the magic of Leopard takes care of the rest. As Murphy wanted it, I had been working around the house and in the garden in last few days' evenings, rather than in my home office where the backup disk is. So it happened that last time I had plugged the disk in was around Saturday night and all changes afterwards were not backed up. Bummer.</p>
<p>The system did not allow Archive and Install option (which copies user data away before install) - it was too little space left, so only option was erase the disk and loose last few days worth of data and changes. Most of the chnages was either stored elsewhere as well (Gmail attachmanents) or at least redoable (some rendered screencasts), but last day work was nowhere else :-(</p>
<p>The good fellas at <a href="http://www.carbonation.com/" target="_blank">Carbon Computing</a> (my nearest certified Apple service centre) made me aware of the FireWire mode: you press T during boot and Mac makes the hard disk available as external FireWire device, which can be attached to another Mac and read from it as from any external disk. This feature is supported by firmware and does not need any system installed. I tried it and it indeed worked, but the damage to the file system must have been fairly large, because I could not navigate deeper into the home directory.</p>
<p>After I accepted that one and half day of work is lost, the reinstallation of the OS-X from scratch was very smooth and very fast experience - it took about 35 minutes. After booting up, system offered restore from TimeMachine and after another two hours, almost 180 GB of stuff was back on Macbooks harddrive. My Mac was almost exactly like on last Sunday morning .. The "almost" means that Time Machine does not quite restore every bit and piece because after system update check, Mac downloaded about 1 GB worth of patches from Apple side and required restart after install. The size of the patch indicates that it were most likely roll-ups of the updates from 10.5.0 t 10.5.3 - certainly more that could be missing in last few days - which would mean that TimeMachine does not really backup system files. I also had to re-enable root access and modify my /etc/hosts file to enter symbolic names for the VM's.</p>
<p>Because I have left out the podcast from the backups, it was pretty annoying to get my iTunes subscription back to normal: the downloaded but not yet listened to podcasts all had exclamation marks, because the iTunes library file was referring to non-existent files, but - because they were in the list, it did not re-download them. I had to delete podcast, resubscribe and re-download the episodes. Oh, well ...</p>
<p>I am now back up and running and without any lost files other than those who were lost because of my laziness to plug in the disk. I think I start to see selling point for Time Capsule :-). Time machine is still working and I was listening to loud fans for quite couple of hours while Spotlight indexed all restored content again.</p>
<p>I still do not know what caused the crash: I was doing lots of video re-encoding, so maybe overheating together with very little free space (I was twice close to 99.5% full disk). And maybe there is really something wrong with the disk.</p>
<p>I have read somewhere that people that went through the near-death experience often change their priorities and behaviour. This certainly true with me after this cold shower. My trust to hard disks (in general) is even lower than before - and in panic, I have already caught up with delayed backups of the home server to two separate external hard disks. I will be also setting up bootable copy of the Mac disk  (using CCC) as soon as Yan builds for me 250 GB external FireWire disk - I do not want risk that the disk will die again .. And in the meantime, my plugging discipline will certainly be flawless ;-)</p>
<p>I have chatted about this with a friend and he asked whether I do not consider returning back to Windows, now when Mac disappointed me so badly and did let me down ...</p>
<p>Well - combination of OS-X and Apple hardware is pretty solid combination, but certainly not as rock-solid as Apple marketing would like to make the world believe. I have just experienced a real-life proof that it can crash pretty badly. But I still believe that it is by far the best available option currently available. For variety of reasons.</p>
<p>First of all, the most troubles I had, was caused by me not having good enough backup system. Every system is only as good as the weakest link, which is in most cases the human part of the workflow. If I would have used Time Capsule or at least plugged the disk every day, there would be no loss of data, just about 3-4 hours wait until being operable again. Which is much less than I have spent any time while rebuilding Windows machine. With Windows it took me 2-3 hours to install XPÂ  - with all three hundred twenty seven updates, thirteen reboots and lots of surfing to find latest drivers for all devices from vendor's sites. And then usually at least one full day to reinstall development environments, java, Visual studio, Office, tools etc from scratch.</p>
<p>Secondly, I never had really good backups while working on Windows - mostly because doing backups was never as easy as connecting a hard disk. As result, I had much larger gaps between backups as nowadays. And considering how much work it was to selectively restore the data ... To sum it up: if this would happen on Windows machine, I would probably loose week or more of data not 1.5 days and to be back operational would take at least 1-2 days, not few hours.</p>
<p>And third - while the OS-X was being installed, I was working on my old, beaten Fujitsu LifeBook - and I realized I how much I actually I miss the tools and overall user experience of the Macbook Pro.</p>
<p>On the positive side: now I know from the firsthand experience that Time Machine works (including restore) and I have learned couple of new neat features of Leopard. I never completely realized the possibilities of booting and running system from non-local disks. And I have now very good incentive to fix the broken automatic backups to Amazon S3 - at least as plan B until I buy Time Capsule ...</p>
