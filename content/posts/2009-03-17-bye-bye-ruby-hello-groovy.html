---
layout: post
title: Bye bye Ruby, hello Groovy
date: 2009-03-17 19:08:35.000000000 -04:00
type: post
published: true
status: publish
comments: true
categories: ["programming"]
tags: [java, ruby, groovy]
author: "Miro Adamy"
---
<p>I first time discovered Ruby back in 2006 (yes, I know, I was late to the game), and immediately fell in love with it. The dynamic nature of the language, the consistency, pure esthaetics and practicality certainly changed the way how I saw software development and programming languages.</p>
<p>Since that time, I made several attempts to integrate Ruby into my professional life and make it part of the toolbox. It was cool to play with Ruby in my spare time, but I wanted to use it on projects whose main development language/platform was mainly Java. Use it as scripting, glue language. Use it as toolkit language to e.g. generate test data, access databases, convert files, build projects and maybe even build a piece of Web applications (admin apps for example).</p>
<p>It never worked. The main problem was availability of the Ruby platform in all environments. While JVM was there by default, Ruby had to be installed and sometimes compiled for the more exotic platforms. And that can be a big deal if you have not full control over the environment - scenario which is pretty much guaranteed in enterprise environment. It is hard to argue with the sysadmin saying "You want to install that in production just to run scripts ? Why do not you use Perl or Bash or Java that are already there ?"</p>
<p>For a little while I thought that JRuby may be the way. After all - all you need is JVM and JRuby is just another JAR, right ? As Goethe said, grey is all theory and green is the tree of life :-). A language is as good and useful as are components and libraries available. One certainly does not want to write everything from scratch. Libraries in Ruby are Gems and Ruby provides very nice, mature and IMHO superior system for component management to Java JAR's - because it handles different versions of same Gem very well (maybe some day there will be Gem hell after DLL hell and JAR hell ;-) ). Unfortunately, some Gems (by Murphy's law most of the really interested ones) are for performance reasons built as thin Ruby layer around native (written in C) library. And JRuby does support that, making most of the Gems unavailable.</p>
<p>Even if JRuby had all the gems available, there would still be a problem that the Gem system and Jar system are different and do not quite fit together. Also, from language point of view you certainly can use Java objects in JRuby and vice versa, but doing that makes you feel slightly schizophrenic - what reality am I in? Is this a Java Java class or Ruby Java class ?</p>
<p>Third problem that I have encountered after coming up with some Web App in Rails is that the deployment model is very different from Java deployment model which myself and people in organizations we work with understand really well. We know how to deploy so that it scales, we know how to monitor and maintain a Java enterprise app. But not a Rails app with all those Mongrels, lighttd's and other creatures :-). This leaves many open questions like "How do we size hardware for expected load ?" for which I do not have answers, and judging by well publicized issues with Rails apps scalability, even the <a href="http://www.37signals.com/" target="_blank">best and brightest in Ruby</a> world may not have either - or at least <a href="http://www.jonathanboutelle.com/mt/archives/2008/08/rails_being_sin.html" target="_blank">some people say so</a>.</p>
<p>About at the same time I discovered Ruby, I also become aware of the strange Java dialect called <a href="http://groovy.codehaus.org/" target="_blank">Groovy</a>. It sort of tried to do the same thing I hoped to use Ruby for, only from firm within Java environment. The original reason I did not want to look deeper at Groovy was that compared to straight elegance of Ruby, it looked kind of ugly. The Java skeleton was sticking out in wrong places and alltogether it just did not feel as good as Ruby.</p>
<p>I have to publicly admit I was wrong.</p>
<p>Being a Mac user, I have license for going after good looks and white shiny objects, but when it comes to programming languages, the good looks may just not be enough. The reality is the proof.</p>
<p>During last 12 months, we have quietly and very successfully used Groovy components and pieces on three large projects. It fitted perfectly, never running into anyof the issues above.</p>
<p>Through these projects, I learned to appreciate the Groovy way, my sense of aesthetics stopped to be offended by certain syntax constructs in Groovy and I even started to like them better than Ruby ones. For example, I am now convinced that Groovy <a href="http://groovy.codehaus.org/Groovy+Categories?print=1" target="_blank">categories</a> are safer and better approach that explicitly alerts programmer about using class extension, than <a href="http://bloggingmyassoff.com/2008/04/15/shiny-1-reopening-classes" target="_blank">re-opening any class</a> in Ruby (which is still possible in Groovy by assigning closure to member in metaclass). Imagine how confusing it can be for software maintenance when reopening and using happens far apart in the source code.</p>
<p>But the most important, the painful realization " how the heck do I do the XYZ thing in this language ? If I only were coding in Java, it would be so much simpler " is history with Groovy. Everything that I was used to use in last 12+ years in Java is still there, all the goodies of Jakarta Commons and way more.</p>
<p>Groovy community seems to be less opinionated, less self-righteous than <a href="http://www.techcrunch.com/2008/01/01/zed-shaw-puts-the-smack-down-on-the-rails-community/" target="_blank">Rails/Ruby community</a> and more understanding for weird requirements and idiosyncrasies of enterprise environments. Rather than telling you "you should not want to do this" and "DHH thinks it is wrong", you actually may get a helpful pointer to useful website or blog how to do that stupid thing in Groovy or Java or combination of both. Because you know, when one needs to accomplish something that seems to be wrong and illogical, being told that it is wrong and you should better forget about it does not really help. People who worked with real enterprise system's integration understand, that cost of touching or changing certain systems is so prohibitive that it is out of question and doing the technically wrong thing may right (and only) option for given situation and customer.</p>
<p>Therefore - bye bye <a href="http://www.ruby-lang.org/en/" target="_blank">Ruby</a>, Hello Groovy. Next things to embrace and embed will be <a href="http://www.grails.org/" target="_blank">Grails</a>.</p>
